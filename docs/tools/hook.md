# Hook

`Hook` 是一种在计算机编程中常见的术语，它指的是一种用于扩展和定制应用程序或框架功能的机制。通过使用 `Hook` ，开发人员可以在不修改原始代码的情况下，添加或修改应用程序或框架的行为。

在前端开发中， `Hook` 通常被用于 `React` 、 `Vue` 等框架中，用于在组件之间共享状态、处理副作用、添加额外的逻辑等。在 `React` 中， `Hook` 是一种函数组件可以使用的状态管理机制，它使得组件可以更方便地访问和修改状态。

`Hook` 通常具有以下特点：

1. 钩子函数是一个纯函数，没有副作用。
2. 钩子函数可以在组件的任何地方调用，但应该在组件挂载前调用。
3. 钩子函数可以在组件之间共享状态，但应该避免在组件内部使用。
4. 钩子函数可以用于处理副作用，但应该避免在渲染过程中使用。

总之， `Hook` 是一种非常有用的机制，可以用于扩展和定制应用程序或框架的功能，提高代码的可维护性和可重用性。

## `hooks` 的优点

- `hooks` 作为独立逻辑的组件封装，其内部的属性、函数等和外部组件具有响应式依附的作用。
- 自定义 `hook` 的作用类似于 `vue2` 中的 `mixin` 技术，使用方便，易于上手。
- 使用 `Vue3` 的组合 `API` 封装的可复用，高内聚低耦合。

## 自定义 hook 规范

1. 具备可复用功能，才需要抽离为 `hooks` 独立文件
2. 函数名/文件名以 `use` 开头，形如: `useXX`
3. 引用时将响应式变量或者方法显式解构暴露出来；

```js
const{ nameRef, Fn } = useXX()
```

## `hooks` 和 `utils` 区别

相同点：

通过 `hooks` 和 `utils` 函数封装， 可以实现组件间共享和复用，提高代码的可重用性和可维护性。

异同点：

1. 表现形式不同
   `hooks` 是在 `utils` 的基础上再包一层组件级别的东西(钩子函数等)； `utils` 一般用于封装相应的逻辑函数，没有组件的东西；
2. 数据是否具有响应式
   `hooks` 中如果涉及到 `ref` ， `reactive` ， `computed` 这些 `api` 的数据，是具有响应式的；而 `utils` 只是单纯提取公共方法就不具备响应式；
3. 作用范围不同
   `hooks` 封装，可以将组件的状态和生命周期方法提取出来，并在多个组件之间共享和重用； `utils` 通常是指一些辅助函数或工具方法，用于实现一些常见的操作或提供特定功能。

`utils` 是通用的工具函数，而 `hooks` 是对 `utils` 的一种封装，用于在组件中共享状态逻辑和副作用。

通过使用 `hooks` ，可以简化代码，并使其更具可读性和可维护性。

## hooks 和 mixin 区别

`hooks` 和 `mixin` ，都是常用代码逻辑抽离手段，方便进行代码复用；

异同点：

1. 语法和用法不同
   `Hooks` 是在 `Vue3` 的 `Composition API` 中引入的一种函数式编程的方式，而 `Mixins` 是在 `Vue2` 中的一种对象混入机制。`Hooks` 使用函数的方式定义和使用，而 `Mixins` 则是通过对象的方式进行定义和应用。
2. 组合性和灵活性不同
   `Hooks` 允许开发者根据逻辑功能来组合代码，封装为自定义 `Hook` 函数，提高代码复用率。而 `Mixins` 在组件中的属性和方法会与组件本身的属性和方法进行合并，可能会导致命名冲突或不可预料的行为。
3. 响应式系统不同
   `Vue3` 的 `Composition API` 使用了一个新的响应式系统，可以通过 `reactive` 和 `ref` 来创建响应式数据，可以更精确地控制组件的更新和依赖追踪。而 `Mixins` 使用 `Vue2` 的响应式系统，对数据的追踪和更新较为简单，可能存在一些性能上的问题。
4. 生命周期钩子不同
   在 `Vue3` 的 `Composition API` 中，可以使用 `onMounted`、`onUpdated` 等钩子函数来替代 `Vue2` 中的生命周期钩子，可以更灵活地管理组件的生命周期。 `Mixins` 依然使用 `Vue2` 的生命周期钩子。

`mixins` 的优缺点

优点：组件中相同代码逻辑复用；

缺点：

1. 变量来源不明确
  变量来源不明确（隐式传入），不利于阅读，使代码变得难以维护。
2. 命名冲突
  多个 `mixins` 的生命周期会融合到一起运行，但是同名属性、同名方法无法融合，可能会导致冲突。
3. 滥用会造成维护问题
  `mixins` 和组件可能出现多对多的关系，复杂度较高（即一个组件可以引用多个 `mixins` ，一个 `mixins` 也可以被多个组件引用）。
